<!DOCTYPE html>
<html>
  <head>
    <title>Mario Kart Wii Count</title>
	<b>auto refresh every 10 seconds</b>
	<h>&nbsp;</h>
    <script>
	function updateStats() {
      var xhr = new XMLHttpRequest();
      xhr.open("GET", "http://newwfc.xyz/json", true);
      xhr.onreadystatechange = function() {
        if (xhr.readyState === 4 && xhr.status === 200) {
          var data = JSON.parse(xhr.responseText);
          var count = data.mariokartwii.length;
          var items = data.mariokartwii;
          var html = "<b>There is/are " + count + " player/s connected on Mario Kart Wii: <br></b>";
          for (var i = 0; i < count; i++) {
            
            if(items[i].rk === "bt"){
              html += "<b>" + items[i].dwc_pid + "</b>: WorldWide Battles (BR: " + items[i].eb + ") (Opponents: " + items[i].numplayers + ") <br><br>";
            }
            else if(items[i].rk === "bt_0"){
              html += "<b>" + items[i].dwc_pid + "</b>: Japan Regional Battles (BR: " + items[i].eb + ") (Opponents: " + items[i].numplayers + ") <br><br>";
            }
            else if(items[i].rk === "bt_1"){
              html += "<b>" + items[i].dwc_pid + "</b>: NA Regional Battles (BR: " + items[i].eb + ") (Opponents: " + items[i].numplayers + ") <br><br>";
            }
            else if(items[i].rk === "bt_2"){
              html += "<b>" + items[i].dwc_pid + "</b>: European Regional Battles (BR: " + items[i].eb + ") (Opponents: " + items[i].numplayers + ") <br><br>";
            }
            else if(items[i].rk === "bt_3"){
              html += "<b>" + items[i].dwc_pid + "</b>: AU & NZ Regional Battles (BR: " + items[i].eb + ") (Opponents: " + items[i].numplayers + ") <br><br>";
            }
            else if(items[i].rk === "bt_4"){
              html += "<b>" + items[i].dwc_pid + "</b>: Taiwan Regional Battles (BR: " + items[i].eb + ") (Opponents: " + items[i].numplayers + ") <br><br>";
            }
            else if(items[i].rk === "bt_5"){
              html += "<b>" + items[i].dwc_pid + "</b>: South Korea Regional Battles (BR: " + items[i].eb + ") (Opponents: " + items[i].numplayers + ") <br><br>";
            }
            else if(items[i].rk === "bt_6"){
              html += "<b>" + items[i].dwc_pid + "</b>: China Regional Battles (BR: " + items[i].eb + ") (Opponents: " + items[i].numplayers + ") <br><br>";
            }
            
            else if(items[i].rk === "vs"){
              html += "<b>" + items[i].dwc_pid + "</b>: WorldWide Versus (VR: " + items[i].ev + ") (Opponents: " + items[i].numplayers + ") (" + items[i].dwc_groupid + ")<br><br>";
            }
            else if(items[i].rk === "vs_0"){
              html += "<b>" + items[i].dwc_pid + "</b>: Japan Regional Versus (VR: " + items[i].ev + ") (Opponents: " + items[i].numplayers + ") <br><br>";
            }
            else if(items[i].rk === "vs_1"){
              html += "<b>" + items[i].dwc_pid + "</b>: NA Regional Versus (VR: " + items[i].ev + ") (Opponents: " + items[i].numplayers + ") <br><br>";
            }
            else if(items[i].rk === "vs_2"){
              html += "<b>" + items[i].dwc_pid + "</b>: European Regional Versus (VR: " + items[i].ev + ") (Opponents: " + items[i].numplayers + ") <br><br>";
            }
            else if(items[i].rk === "vs_3"){
              html += "<b>" + items[i].dwc_pid + "</b>: AU & NZ Regional Versus (VR: " + items[i].ev + ") (Opponents: " + items[i].numplayers + ") <br><br>";
            }
            else if(items[i].rk === "vs_4"){
              html += "<b>" + items[i].dwc_pid + "</b>: Taiwan Regional Versus (VR: " + items[i].ev + ") (Opponents: " + items[i].numplayers + ") <br><br>";
            }
            else if(items[i].rk === "vs_5"){
              html += "<b>" + items[i].dwc_pid + "</b>: South Korea Regional Versus (VR: " + items[i].ev + ") (Opponents: " + items[i].numplayers + ") <br><br>";
            }
            else if(items[i].rk === "vs_6"){
              html += "<b>" + items[i].dwc_pid + "</b>: China Regional Versus (VR: " + items[i].ev + ") (Opponents: " + items[i].numplayers + ") <br><br>";
            }
            else if(items[i].rk){
              html += "<b>" + items[i].dwc_pid + "</b>: Unknown Region: " + items[i].rk + " (VR: " + items[i].ev + ") (BR: " + items[i].eb + ") (Opponents: " + items[i].numplayers + ") <br><br>";
            
            }else{
              if(items[i].dwc_mtype === "0"){
                html += "<b>" + items[i].dwc_pid + "</b>: Player is not in a match? (Looking for a matchmaking game) <br><br>";
              }else if(items[i].dwc_mtype === "2"){
                html += "<b>" + items[i].dwc_pid + "</b>: Hosting a Friend Room (" + items[i].dwc_groupid + ")<br><br>";
              }else if(items[i].dwc_mtype === "3"){
                html += "<b>" + items[i].dwc_pid + "</b>: In a Friend Room (" + items[i].dwc_groupid + ")<br><br>";
              }else{
                html += "<b>" + items[i].dwc_pid + "</b>: Player is not in a match<br><br>";
              }
            }
          }
          document.getElementById("result").innerHTML = html;
        }
      };
      xhr.send();
	}
	updateStats();
	
	setInterval(updateStats, 10000);
    </script>
    <style>
      body {
        background-color: #424549;
        color: white;
        text-align: left;
        font-size: 20px;
      }
    </style>
  </head>
  <body>
    <div id="result"></div>
  </body>
</html>